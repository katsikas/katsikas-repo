<pre class="code">
<span class="srcline"><span class="lineno"><a href="3,1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T11U3">c</span>,<span class="var type0" id="S3T0U4">ia</span>,<span class="var type0" id="S4T0U5">ib</span>] = eml_setop(<span class="mxinfo" id="T9:U2"><span class="var type1" id="S5T9U8">op</span></span>,<span class="mxinfo" id="T2:U4"><span class="var type1" id="S6T2U9">a</span></span>,<span class="mxinfo" id="T6:U6"><span class="var type1" id="S7T6U10">b</span></span>,<span class="var type1" id="S8T10U11">varargin</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="3,2">  2</a></span><span class="line"><span class="comment">%MATLAB Code Generation Library Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,3">  3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="3,4">  4</a></span><span class="line"><span class="comment">%   Shared implementation for INTERSECT, SETDIFF, SETXOR, and UNION.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,5">  5</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,6">  6</a></span><span class="line"><span class="comment">%   Notes:</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,7">  7</a></span><span class="line"><span class="comment">%   1. When 'rows' is not specified:</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,8">  8</a></span><span class="line"><span class="comment">%       Inputs must be row vectors. If a vector is variable-size, its first</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,9">  9</a></span><span class="line"><span class="comment">%       dimension must have a fixed length of 1. The input [] is not</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,10"> 10</a></span><span class="line"><span class="comment">%       supported. Use a 1-by-0 input (e.g., zeros(1,0)) to represent the</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,11"> 11</a></span><span class="line"><span class="comment">%       empty set.  Empty outputs are always row vectors, 1-by-0, never</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,12"> 12</a></span><span class="line"><span class="comment">%       0-by-0.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,13"> 13</a></span><span class="line"><span class="comment">%   2. When 'rows' is specified:</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,14"> 14</a></span><span class="line"><span class="comment">%       Outputs IA and IB are always column vectors, 0-by-1 if empty, never</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,15"> 15</a></span><span class="line"><span class="comment">%       0-by-0, even if the output C is 0-by-0.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,16"> 16</a></span><span class="line"><span class="comment">%   3. Inputs must already be sorted in ascending order. The first output</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,17"> 17</a></span><span class="line"><span class="comment">%       will always be sorted in ascending order.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,18"> 18</a></span><span class="line"><span class="comment">%   4. Complex inputs must be 'single' or 'double'.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,19"> 19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="3,20"> 20</a></span><span class="line"><span class="comment">%   Copyright 1984-2010 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,21"> 21</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,22"> 22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="3,23"> 23</a></span><span class="line">eml_allow_enum_inputs;</span></span>
<span class="srcline"><span class="lineno"><a href="3,24"> 24</a></span><span class="line">eml_invariant(nargin &gt;= 3, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,25"> 25</a></span><span class="line">    eml_message(<span class="string">'Coder:MATLAB:minrhs'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="3,26"> 26</a></span><span class="line">eml_invariant(nargin &lt;= 4, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,27"> 27</a></span><span class="line">    eml_message(<span class="string">'Coder:toolbox:eml_setop_2'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,28"> 28</a></span><span class="line">    <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,29"> 29</a></span><span class="line">eml_invariant(<span class="mxinfo" id="T12:U9">eml_is_const(<span class="var type1" id="S5T9U43">op</span>) &amp;&amp; ischar(<span class="var type1" id="S5T9U46">op</span>)</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,30"> 30</a></span><span class="line">    eml_message(<span class="string">'Coder:toolbox:eml_setop_3'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,31"> 31</a></span><span class="line">    <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,32"> 32</a></span><span class="line">eml_invariant( <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,33"> 33</a></span><span class="line">    <span class="mxinfo" id="T12:U12">(isa(<span class="var type1" id="S6T2U60">a</span>,<span class="string">'float'</span>) || isreal(<span class="var type2" id="S6T0U64">a</span>)) &amp;&amp; <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="3,34"> 34</a></span><span class="line"><span class="mxinfo" id="T12:U12">    (isa(<span class="var type1" id="S7T6U69">b</span>,<span class="string">'float'</span>) || isreal(<span class="var type2" id="S7T0U73">b</span>))</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,35"> 35</a></span><span class="line">    eml_message(<span class="string">'Coder:toolbox:eml_setop_4'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,36"> 36</a></span><span class="line">    <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,37"> 37</a></span><span class="line">eml_invariant(<span class="mxinfo" id="T12:U15">(~coder.isenum(<span class="var type2" id="S6T0U90">a</span>) &amp;&amp; ~coder.isenum(<span class="var type2" id="S7T0U96">b</span>)) || isa(<span class="var type2" id="S6T0U99">a</span>,class(<span class="var type2" id="S7T0U102">b</span>))</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,38"> 38</a></span><span class="line">    eml_message(<span class="string">'Coder:toolbox:eml_setop_5'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,39"> 39</a></span><span class="line">    <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,40"> 40</a></span><span class="line"><span class="keyword">if</span> strcmp(<span class="var type2" id="S5T0U112">op</span>,<span class="string">'intersect'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="3,41"> 41</a></span><span class="line">    <span class="var type2" id="S20T0U116">opcode</span> = INTERSECT;</span></span>
<span class="srcline"><span class="lineno"><a href="3,42"> 42</a></span><span class="line"><span class="keyword">elseif</span> strcmp(<span class="var type2" id="S5T0U122">op</span>,<span class="string">'setdiff'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="3,43"> 43</a></span><span class="line">    <span class="var type2" id="S20T0U126">opcode</span> = SETDIFF;</span></span>
<span class="srcline"><span class="lineno"><a href="3,44"> 44</a></span><span class="line"><span class="keyword">elseif</span> strcmp(<span class="var type2" id="S5T0U132">op</span>,<span class="string">'setxor'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="3,45"> 45</a></span><span class="line">    <span class="var type2" id="S20T0U136">opcode</span> = SETXOR;</span></span>
<span class="srcline"><span class="lineno"><a href="3,46"> 46</a></span><span class="line"><span class="keyword">elseif</span> strcmp(<span class="var type2" id="S5T0U142">op</span>,<span class="string">'union'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="3,47"> 47</a></span><span class="line">    <span class="mxinfo" id="T13:U16"><span class="var type2" id="S20T0U146">opcode</span> = <span class="mxinfo" id="T13:U17">UNION</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="3,48"> 48</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,49"> 49</a></span><span class="line">    eml_invariant(false, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,50"> 50</a></span><span class="line">        eml_message(<span class="string">'Coder:toolbox:eml_setop_6'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,51"> 51</a></span><span class="line">        <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,52"> 52</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,53"> 53</a></span><span class="line">eml_invariant( <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,54"> 54</a></span><span class="line">    <span class="mxinfo" id="T12:U18">(isa(<span class="var type1" id="S6T2U169">a</span>,<span class="string">'numeric'</span>) || ischar(<span class="var type2" id="S6T0U173">a</span>) || islogical(<span class="var type2" id="S6T0U176">a</span>)) &amp;&amp; <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="3,55"> 55</a></span><span class="line"><span class="mxinfo" id="T12:U18">    (isa(<span class="var type1" id="S7T6U182">b</span>,<span class="string">'numeric'</span>) || ischar(<span class="var type2" id="S7T0U186">b</span>) || islogical(<span class="var type2" id="S7T0U189">b</span>))</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,56"> 56</a></span><span class="line">    eml_message(<span class="string">'Coder:toolbox:eml_setop_7'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,57"> 57</a></span><span class="line">    <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,58"> 58</a></span><span class="line"><span class="keyword">if</span> nargin &gt; 3</span></span>
<span class="srcline"><span class="lineno"><a href="3,59"> 59</a></span><span class="line">    <span class="var type0" id="S27T0U203">flag</span> = <span class="var type2" id="S8T0U205">varargin</span>{1};</span></span>
<span class="srcline"><span class="lineno"><a href="3,60"> 60</a></span><span class="line">    eml_invariant(ischar(<span class="var type0" id="S27T0U213">flag</span>) &amp;&amp; strcmp(eml_tolower(<span class="var type0" id="S27T0U218">flag</span>),<span class="string">'rows'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,61"> 61</a></span><span class="line">        eml_message(<span class="string">'Coder:toolbox:eml_setop_8'</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,62"> 62</a></span><span class="line">        <span class="string">'IfNotConst'</span>,<span class="string">'Fail'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,63"> 63</a></span><span class="line">    [<span class="var type2" id="S2T0U228">c</span>,<span class="var type0" id="S3T0U229">ia</span>,<span class="var type0" id="S4T0U230">ib</span>] = do_rows(<span class="var type2" id="S20T0U233">opcode</span>,<span class="var type2" id="S6T0U234">a</span>,<span class="var type2" id="S7T0U235">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="3,64"> 64</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,65"> 65</a></span><span class="line">    <span class="mxinfo" id="T14:U21"><span class="message error" id="M3F3C">[<span class="var type2" id="S2T0U240"><span class="message error" id="M4F3C">c</span></span>,<span class="var type0" id="S3T0U241"><span class="message error" id="M5F3C">ia</span></span>,<span class="var type0" id="S4T0U242"><span class="message error" id="M6F3C">ib</span></span>] = do_vectors(<span class="var type1" id="S20T13U245">opcode</span>,<span class="var type1" id="S6T2U246">a</span>,<span class="var type1" id="S7T6U247">b</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="3,66"> 66</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="3,67"> 67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="3,68"> 68</a></span><span class="line"><span class="comment">%--------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="3,69"> 69</a></span><span class="line"></span></span>
</pre>
